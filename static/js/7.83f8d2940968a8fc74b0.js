webpackJsonp([7],{H4YW:function(e,t){},wP8f:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Dd8w"),o=a.n(r),l={data:function(){return{formLabelWidth:"100px",flag:!1,paperId:"",score:{changeNumber:"",fillNumber:"",judgeNumber:""},form:{},pagination:{current:1,total:null,size:5},dialogVisible:!1,rules2:{source:[{required:!0,message:"考试科目不能为空",trigger:"blur"}],major:[{required:!0,message:"请选择所属专业",trigger:"change"}],grade:[{required:!0,message:"请选择年级",trigger:"change"}],examDate:[{required:!0,message:"请选择考试日期",trigger:"change"}],totalTime:[{required:!0,message:"考试时长不能为空",trigger:"blur"}],type:[{required:!0,message:"考试描述不能为空",trigger:"blur"}],totalScore:[{required:!0,message:"总分不能为空",trigger:"blur"}]}}},created:function(){this.getExamInfo()},methods:{submitExam:function(e){var t=this;this.$confirm("一旦组卷之后将不可再修改，是否确定?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$axios({url:"/api/item",method:"post",data:{changeNumber:t.score.changeNumber,fillNumber:t.score.fillNumber,judgeNumber:t.score.judgeNumber,paperId:t.paperId,subject:"大学生英语四级"}}).then(function(e){console.log(e);var a=e.data;200==a.code?(t.flag=!1,t.$message({message:a.message,type:"success"})):400==a.code&&t.$message({message:a.message,type:"error"})})}).catch(function(){t.flag=!1,t.$message({type:"info",message:"取消组卷"})})},create:function(e){this.flag=!0,this.paperId=e,console.log(this.paperId)},edit:function(e){var t=this;this.dialogVisible=!0,this.$axios("/api/exam/"+e).then(function(e){200==e.data.code&&(t.form=e.data.data)})},resetForm:function(e){this.$refs[e].resetFields()},submit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;e.dialogVisible=!1,e.$axios({url:"/api/exam",method:"put",data:o()({},e.form)}).then(function(t){200==t.data.code&&e.$message({message:"更新成功",type:"success"}),e.getExamInfo()})})},deleteRecord:function(e){var t=this;this.$confirm("确定删除该记录吗,该操作不可逆！！！","删除提示",{confirmButtonText:"确定删除",cancelButtonText:"算了,留着",type:"danger"}).then(function(){t.$axios({url:"/api/exam/"+e,method:"delete"}).then(function(e){t.getExamInfo()})}).catch(function(){})},getExamInfo:function(){var e=this;this.$axios("/api/exams/"+this.pagination.current+"/"+this.pagination.size).then(function(t){e.pagination=t.data.data}).catch(function(e){})},handleSizeChange:function(e){this.pagination.size=e,this.getExamInfo()},handleCurrentChange:function(e){this.pagination.current=e,this.getExamInfo()}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"exam"},[a("el-table",{attrs:{data:e.pagination.records,border:""}},[a("el-table-column",{attrs:{fixed:"left",prop:"source",label:"考试科目",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"考试描述",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"major",label:"所属专业",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"grade",label:"年级",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"examDate",label:"考试日期",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalTime",label:"持续时间",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalScore",label:"总分",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tips",label:"考生须知",width:"400"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.edit(t.row.examCode)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){e.create(t.row.paperId)}}},[e._v("组卷")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.deleteRecord(t.row.examCode)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page",attrs:{"current-page":e.pagination.current,"page-sizes":[5,8,10],"page-size":e.pagination.size,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("el-dialog",{attrs:{title:"在线组卷",visible:e.flag,width:"300px"},on:{"update:visible":function(t){e.flag=t},close:function(t){e.resetForm("score")}}},[a("el-form",{ref:"score",attrs:{model:e.score}},[a("el-form-item",{attrs:{label:"选择题数量","label-width":e.formLabelWidth,prop:"changeNumber"}},[a("el-input",{attrs:{placeholder:"请输入选择题数量"},model:{value:e.score.changeNumber,callback:function(t){e.$set(e.score,"changeNumber",t)},expression:"score.changeNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"填空题数量","label-width":e.formLabelWidth,prop:"fillNumber"}},[a("el-input",{attrs:{placeholder:"请输入填空题数量"},model:{value:e.score.fillNumber,callback:function(t){e.$set(e.score,"fillNumber",t)},expression:"score.fillNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"判断题数量","label-width":e.formLabelWidth,prop:"judgeNumber"}},[a("el-input",{attrs:{placeholder:"请输入判断题数量"},model:{value:e.score.judgeNumber,callback:function(t){e.$set(e.score,"judgeNumber",t)},expression:"score.judgeNumber"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.flag=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitExam()}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑考试信息",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t},close:function(t){e.resetForm("form")}}},[a("section",{staticClass:"update"},[a("el-form",{ref:"form",attrs:{rules:e.rules2,model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"考试科目",prop:"source"}},[a("el-input",{model:{value:e.form.source,callback:function(t){e.$set(e.form,"source",t)},expression:"form.source"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"考试描述",prop:"type"}},[a("el-input",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属专业",prop:"major"}},[a("el-input",{model:{value:e.form.major,callback:function(t){e.$set(e.form,"major",t)},expression:"form.major"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"年级"}},[a("el-input",{model:{value:e.form.grade,callback:function(t){e.$set(e.form,"grade",t)},expression:"form.grade"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"考试日期",prop:"examDate"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.form.examDate,callback:function(t){e.$set(e.form,"examDate",t)},expression:"form.examDate"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"持续时间",prop:"totalTime"}},[a("el-input",{model:{value:e.form.totalTime,callback:function(t){e.$set(e.form,"totalTime",t)},expression:"form.totalTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"总分",prop:"totalScore"}},[a("el-input",{model:{value:e.form.totalScore,callback:function(t){e.$set(e.form,"totalScore",t)},expression:"form.totalScore"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"考生须知"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.tips,callback:function(t){e.$set(e.form,"tips",t)},expression:"form.tips"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("提 交")])],1)])],1)},staticRenderFns:[]};var s=a("VU/8")(l,i,!1,function(e){a("H4YW")},"data-v-e5fee908",null);t.default=s.exports}});
//# sourceMappingURL=7.83f8d2940968a8fc74b0.js.map